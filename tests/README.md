# 测试文件说明

本文件夹包含项目各个模块的测试程序，用于验证系统功能和性能。

## 相机相关测试

### `camera_test.cpp`
- **功能**: 测试相机接口的基本读取功能
- **说明**: 验证相机抽象接口的图像采集功能，支持海康威视和迈德威视相机
- **特性**: 计算并显示帧率（FPS），可选显示视频流窗口
- **使用方法**: `./camera_test -c configs/camera.yaml -d` (使用 `-d` 参数显示图像)

### `usbcamera_test.cpp`
- **功能**: 测试USB相机的基本读取功能
- **说明**: 验证USB相机的图像采集功能
- **特性**: 计算并显示帧率，可选显示视频流窗口

### `multi_usbcamera_test.cpp`
- **功能**: 测试多个USB相机同时读取
- **说明**: 验证多相机同步采集功能，可同时从多个USB相机读取图像

### `camera_detect_test.cpp`
- **功能**: 测试相机图像检测功能
- **说明**: 验证目标检测功能，支持传统方法和YOLO检测
- **特性**: 从相机读取图像并进行装甲板检测，显示检测结果和性能统计

### `usbcamera_detect_test.cpp`
- **功能**: 测试USB相机检测功能
- **说明**: 验证USB相机与检测器的集成，使用YOLO进行目标检测

### `camera_thread_test.cpp`
- **功能**: 测试多线程相机处理和YOLO检测
- **说明**: 验证多线程图像处理性能，使用线程池进行并行YOLO检测
- **特性**: 有序队列管理检测结果，性能统计和可视化

## 检测器相关测试

### `detector_video_test.cpp`
- **功能**: 测试检测器在视频上的表现
- **说明**: 验证检测器在视频文件上的性能
- **特性**: 从视频文件读取图像，使用传统方法或YOLO进行装甲板检测，输出检测结果的像素坐标

## 自动瞄准系统测试

### `auto_aim_test.cpp`
- **功能**: 测试自动瞄准功能（离线视频测试）
- **说明**: 离线测试完整的自动瞄准系统
- **特性**: 
  - 从视频文件读取图像和IMU数据
  - YOLO目标检测
  - 目标跟踪和预测
  - 弹道解算和瞄准控制
  - 可视化调试信息（重投影、状态显示等）

### `camera_auto_aim_test.cpp`
- **功能**: 测试自动瞄准功能（相机实时测试）
- **说明**: 实时测试完整的自动瞄准系统，使用相机采集图像
- **特性**: 
  - 从相机读取图像
  - 从文本文件读取固定IMU数据（四元数，格式: w x y z）
  - YOLO目标检测
  - 目标跟踪和预测
  - 弹道解算和瞄准控制
  - 可视化调试信息（重投影、状态显示、帧率等）
- **使用方法**: `./camera_auto_aim_test -c configs/camera.yaml -i imu_data.txt`

### `minimum_vision_system.cpp`
- **功能**: 最小视觉系统测试 - 完整的自瞄系统集成测试
- **说明**: 实现完整的自动瞄准系统，包含所有核心模块
- **特性**:
  - 多线程图像采集和检测
  - IMU数据融合
  - 目标跟踪和预测
  - 弹道解算和瞄准控制
  - 射击决策
  - 可视化调试信息

## 能量机关（Buff）测试

### `auto_buff_test.cpp`
- **功能**: 测试自动能量机关（buff）检测和瞄准功能
- **说明**: 验证能量机关识别和瞄准系统
- **特性**:
  - 从视频文件读取图像和IMU数据
  - 能量机关（大符）检测
  - 目标跟踪和预测
  - 弹道解算和瞄准控制
  - 可视化调试信息

## 云台相关测试

### `gimbal_test.cpp`
- **功能**: 测试云台控制和状态监控
- **说明**: 验证云台功能
- **特性**: 
  - 云台状态读取（姿态、速度、子弹速度等）
  - 云台控制命令发送
  - 可选的开火测试（周期性开火）
  - 状态数据可视化

### `gimbal_response_test.cpp`
- **功能**: 测试云台响应性能
- **说明**: 测试云台对不同控制信号的响应
- **特性**: 
  - 三角波信号测试
  - 阶跃信号测试
  - 圆形轨迹测试
  - 响应延迟和精度分析

### `fire_test.cpp`
- **功能**: 测试开火功能
- **说明**: 验证云台开火控制
- **特性**: 周期性开火测试，状态记录和可视化

## 路径规划测试

### `planner_test.cpp`
- **功能**: 在线测试路径规划器（带实际硬件）
- **说明**: 在线测试路径规划算法
- **特性**: 
  - 创建模拟目标
  - 路径规划计算
  - 将规划结果发送到实际云台
  - 监控云台状态和规划效果

### `planner_test_offline.cpp`
- **功能**: 离线测试路径规划器
- **说明**: 离线测试路径规划算法，不涉及实际硬件控制
- **特性**: 创建模拟目标，路径规划计算，规划结果可视化

## 硬件接口测试

### `cboard_test.cpp`
- **功能**: 测试控制板（CBoard）的IMU数据读取
- **说明**: 验证控制板功能
- **特性**: 
  - 读取IMU四元数数据
  - 转换为欧拉角并显示
  - 显示子弹速度信息

### `dm_test.cpp`
- **功能**: 测试DM IMU数据读取
- **说明**: 验证DM IMU模块功能
- **特性**: 读取IMU四元数数据，转换为欧拉角并显示

## 标定相关测试

### `handeye_test.cpp`
- **功能**: 测试手眼标定功能
- **说明**: 验证手眼标定结果
- **特性**: 
  - 从相机读取图像
  - 读取IMU姿态数据
  - 将世界坐标系点投影到图像平面
  - 可视化投影结果和云台姿态

## ROS2通信测试

### `publish_test.cpp`
- **功能**: 测试ROS2消息发布功能
- **说明**: 验证ROS2消息发布功能
- **特性**: 初始化ROS2节点，发布装甲板检测数据，测试消息发布频率

### `subscribe_test.cpp`
- **功能**: 测试ROS2消息订阅功能
- **说明**: 验证ROS2消息订阅功能
- **特性**: 初始化ROS2节点，订阅敌方状态消息，显示接收到的数据

### `topic_loop_test.cpp`
- **功能**: 测试ROS2话题循环通信
- **说明**: 验证ROS2话题的发布和订阅循环
- **特性**: 
  - 创建自定义发布者
  - 发布敌方状态消息
  - 同时订阅相同话题
  - 测试消息循环传递

## 使用说明

1. **编译测试程序**: 使用CMake编译项目后，测试程序会生成在 `build/tests/` 目录下

2. **运行测试**: 
   ```bash
   ./build/tests/camera_test -c configs/camera.yaml -d
   ```

3. **查看帮助**: 大多数测试程序支持 `--help` 或 `-h` 参数查看使用说明

4. **显示图像**: 使用 `-d` 或 `--display` 参数可以显示视频流窗口

5. **退出程序**: 按 `q` 键或使用 `Ctrl+C` 退出程序

## 注意事项

- 部分测试需要特定的硬件设备（如相机、云台、控制板等）
- 部分测试需要配置文件，请确保配置文件路径正确
- ROS2相关测试需要ROS2环境已正确配置
- 视频文件测试需要提供对应的视频文件和IMU数据文件

